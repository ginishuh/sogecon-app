# API 환경변수 (로컬 개발)

# 데이터베이스 연결 (둘 중 하나 선택)
# 1) Postgres(Docker 사용; 개발 기본: 5433)
DATABASE_URL=postgresql+psycopg://app:devpass@localhost:5433/appdb
# 2) SQLite(옵션): 별도 의존성 없이 바로 실행
# DATABASE_URL=sqlite:///./dev.sqlite3

# 앱 실행 환경
APP_ENV=dev

# JWT 시크릿(개발 기본값 — 운영 시 시크릿 매니저 사용)
JWT_SECRET=change-me

# CORS 허용 오리진(개발 환경 기본값) - 반드시 JSON 배열 문자열이어야 하며, 예: '["http://localhost:3000"]'
# (이 값은 Python의 json.loads 등으로 파싱됩니다. 예: https://fastapi.tiangolo.com/tutorial/cors/#use-corsmiddleware)
CORS_ORIGINS=["http://localhost:3000"]

# Web(Next.js)에서 API 베이스 URL
# apps/web/lib/api.ts는 NEXT_PUBLIC_WEB_API_BASE를 사용합니다.
NEXT_PUBLIC_WEB_API_BASE=http://localhost:3001

# 레이트 리밋 설정 (SlowAPI)
RATE_LIMIT_DEFAULT=120/minute
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_NOTIFY_TEST=1/minute
RATE_LIMIT_SUPPORT=1/minute
RATE_LIMIT_SUBSCRIBE=30/minute
RATE_LIMIT_POST_CREATE=5/minute

# Web Push (VAPID) - 개발용 기본값
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:security@trr.co.kr

# Web Push 추가 설정
NEXT_PUBLIC_VAPID_PUBLIC_KEY=
PUSH_ENCRYPT_AT_REST=false
PUSH_KEK=

# Docker 포트 설정 (선택사항)
DB_DEV_PORT=5433
DB_TEST_PORT=5434

# 테스트 설정(선택): 기본은 SQLite, Postgres로 테스트하려면 아래 값 설정
# TEST_DB=pg
# TEST_DB_URL=postgresql+psycopg://app:devpass@localhost:5434/appdb_test
# # 보호장치 해제(특수 케이스): 테스트 DB명이 'test'를 포함하지 않아도 실행하려면
# # TEST_DB_FORCE=1

# 운영 관련 설정 (예시)
# RELEASE=v1.0.0
# SENTRY_DSN=https://your-sentry-dsn-here
# MEDIA_ROOT=uploads
# MEDIA_URL_BASE=/media
