# API 서버용 환경변수 예시(.env.api.example)
# - 실제 운영에서는 이 파일을 복사해 `.env.api` 로 사용하세요.
# - 레포에 커밋하지 마세요(.gitignore 규칙 적용). Docker 빌드 컨텍스트에도 포함되지 않습니다.

# 1) 런타임/환경
APP_ENV=prod
# 배포 버전 태그(옵션; CI/스크립트에서 주입하는 값을 우선 사용)
# RELEASE=

# 2) 데이터베이스
# tip: 전용 네트워크 사용 시 먼저 생성하세요 → `docker network create segecon_net`
# 예) PostgreSQL(일반 서버): postgresql+psycopg://USER:PASS@HOST:5432/DB
# 예) PostgreSQL(컨테이너 전용 네트워크): postgresql+psycopg://USER:PASS@sogecon-db:5432/DB
#     - 예시 네트워크/컨테이너: segecon_net / sogecon-db
# 예) 매니지드(RDS 등, TLS 권장): postgresql+psycopg://USER:PASS@HOST:5432/DB?sslmode=require
# 예) SQLite(비권장): sqlite:///./dev.sqlite3
DATABASE_URL=postgresql+psycopg://app:devpass@localhost:5432/appdb

# 3) CORS
# JSON 배열 문자열 권장(도메인 변경 시 이 값도 꼭 갱신)
# 임시 도메인 예시: segecon.wastelite.kr
CORS_ORIGINS=["https://segecon.wastelite.kr"]

# 4) 세션/JWT(운영에서는 32자 이상 강력한 시크릿 필수)
JWT_SECRET=change-me-to-a-strong-secret

# 5) 레이트리밋(기본값 OK; 필요 시만 조정)
RATE_LIMIT_DEFAULT=120/minute
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_NOTIFY_TEST=1/minute
RATE_LIMIT_SUPPORT=1/minute
RATE_LIMIT_SUBSCRIBE=30/minute
RATE_LIMIT_POST_CREATE=5/minute

# 6) Web Push(VAPID)
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:security@trr.co.kr

# 구독정보 저장 암호화 옵션(선택)
PUSH_ENCRYPT_AT_REST=false
# 32바이트 base64 키(예: openssl rand -base64 32)
PUSH_KEK=

# 7) 업로드/미디어
MEDIA_ROOT=uploads
MEDIA_URL_BASE=/media
AVATAR_MAX_BYTES=100000
AVATAR_MAX_UPLOAD_BYTES=2000000
AVATAR_MAX_PIXELS=512

# 8) 관측/로그(Sentry — 선택)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.05
SENTRY_PROFILES_SAMPLE_RATE=0.0
SENTRY_SEND_DEFAULT_PII=false

# 9) 쿠키/세션(도메인 전략에 맞춰 조정)
# - 같은 상위도메인의 하위 도메인(현재 단계): SAMESITE=lax, SECURE=true 권장
# - 완전 별도 도메인으로 전환(교차 사이트): SAMESITE=none, SECURE=true 필수(HTTPS 필요)
COOKIE_SAMESITE=lax
COOKIE_SECURE=true
# 필요 시 쿠키 도메인 고정(미설정 권장): 예) api.example.com 또는 .example.com
COOKIE_DOMAIN=
