# 2025-12-04

- Added: D-3/D-1 이벤트 예약 알림 발송 시스템 (APScheduler 기반)
- Added: ScheduledNotificationLog 모델 + 마이그레이션
- Added: 관리자 API (수동 트리거, 발송 내역 조회)
- Added: APScheduler 타입 스텁 (pyright strict 모드 호환)
- Changed: .env.example에 SCHEDULER_ENABLED 설정 추가
- Fixed: trigger-scheduled 엔드포인트 실제 발송 로직 연결
- Fixed: 날짜 파싱 예외 처리 (400 에러 반환)
- Fixed: ScheduledNotificationLog에 created_at 컬럼 추가
- Added: 데스크톱 헤더에 관리자 드롭다운 메뉴 추가
- Changed: 총동문회 소개에 공지사항 링크 추가
- Added: posts.images JSONB 컬럼 + 마이그레이션
- Added: MultiImageUpload 컴포넌트 (다중 업로드, 메인 이미지 선택)
- Added: 게시글 상세 페이지 이미지 갤러리
- Fixed: PR #85 2차 리뷰 반영
  - apscheduler 의존성 requirements.txt 추가
  - KST 타임존 적용 (date.today() → datetime.now(KST).date())
  - 비동기 webpush (asyncio.to_thread로 이벤트 루프 블로킹 방지)
  - ON CONFLICT DO NOTHING으로 레이스 컨디션 해결
  - 다중 워커 환경 문서화 및 경고 로그
  - 스케줄러 기본값 True 유지, 주석 수정
- Fixed: _DummyProvider send_async 메서드 추가 (CI 테스트 통과)
- Security: Next.js 15.5.4 → 15.5.7 (GHSA-9qr9-h5gf-34mp RCE 취약점)
- Chore: pnpm-lock.yaml 갱신 (Next.js 보안 패치 반영)
- Fix(ci): check_versions.py, versions.md Next.js 기대값 15.5.7 업데이트
- Fix(web): 데스크톱 헤더 관리자 메뉴 RequireAdmin → 직접 isAdmin 체크로 변경
- Fix(ops): cloud-build.sh, cloud-start.sh segecon → sogecon 오타 수정
- Fix(docs,ops): segecon → sogecon 오타 일괄 수정 (에이전트 문서, 시드, 스크립트)
- Fix(api): 관리자 로그인/세션에서 member.id 반환 (posts.author_id FK 호환)
- Security(api): 관리자 글 작성 시 author_id 서버 강제 주입 (요청 변조 방지)
- Fix(web): 게시글 작성 페이지 작성자 ID 입력란 제거 (세션 기반 자동 설정)
- Fix(api): 관리자 로그인 시 member 레코드 누락 체크 (403 admin_member_record_missing)
- Security(api): 댓글 작성 시 author_id 서버 강제 주입 (요청 변조 방지)
