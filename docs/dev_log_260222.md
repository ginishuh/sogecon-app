# 2026-02-22

- Added: #135 회원정보 수정 정책 분리 — 이름/기수 관리자 승인 기반 변경요청 + 이메일 즉시 수정
- Added: ProfileChangeRequest 모델/마이그레이션, Repository/Service/Router 계층
- Added: 관리자 정보변경 심사 페이지 (/admin/profile-change-requests)
- Changed: MemberUpdate 스키마에서 name 제거, email 추가 (하위호환)
- Changed: 관리자 목록에 회원명/학번 표시 (selectinload), member 조회 최적화
- Fixed: 리뷰 피드백 — new_value 길이 제한(max 255), cohort INT4 범위 검증 추가
- Changed: 전화번호 저장 형식 통일 — 숫자만 저장, 표시 시 하이픈 포맷 (frontend impact)
- Added: phone-utils.ts 전화번호 포맷 유틸리티, 데이터 마이그레이션 (기존 값 정규화)
- Changed: 시드 데이터 (dev/prod) — 전체 admin 권한 토큰, phone, email 업데이트
- Changed: #136 파비콘/앱 아이콘 IHS 크레스트로 통일 + viewport themeColor 추가 (frontend impact)
- Added: scripts/generate-icons.mjs — sharp 기반 아이콘 생성 스크립트, favicon.ico 신규 생성
- Fixed: #141 infra/web.Dockerfile Node 22→24.12.0, Nginx X-Real-IP 중복 제거
- Fixed: #139 댓글 alert/confirm → useToast+ConfirmDialog, 삭제 버튼 권한 체크 추가 (frontend impact)
- Fixed: #140 아바타 업로드 안내 100KB→2MB 정정, updateMe payload 타입 강화 (frontend impact)
- Added: #139 CommentsSection 테스트 9개 (권한/다이얼로그/toast 검증)
- Fixed: #142 uploads.py 넓은 예외→구체적 예외, LIKE 와일드카드 이스케이프(members/posts/events)
- Fixed: #143 web-rollback.sh warn() 추가, Dockerfile 런타임 CI=true 제거, Nginx gzip/http2 추가, CI/waiver 정리
- Fixed: #142 리뷰 반영 — uploads.py DecompressionBombError 추가 (폭탄 이미지 422 처리)
- Fixed: #148 통합 후 회귀 수정 — `super_admin` 단독 역할도 `require_admin/is_admin/require_member` 통과하도록 auth_service 보정
- Fixed: #148 관리자 회원관리 화면 목록 조회 422 해결 — `limit=500` 단건 호출 제거, `limit=100` 페이지 루프(fetch-all)로 전환 (frontend impact)
- Fixed: #148 Alembic 다중 head 해소 — `e1a2b3c4d5f6` down_revision을 `a3b7c9d2e1f4`로 연결
- Changed: AdminUser 제거 이후 API 테스트 전면 동기화 — `/admin/members` 기준으로 시드/권한/생성-활성화 시나리오 재작성
- Fixed: #149 리뷰 후속 — downgrade one-way 특성 주석 명시, self-demotion 조건식 단순화, `member_email_already_in_use` 에러코드 정합화
- Fixed: #149 리뷰 후속 — `tests/api/test_auth.py`의 `author_id=1` 하드코딩 제거(시드 member_id 참조)
- Fixed: #149 CI(web) 번들 체크 오탐 보정 — `--exclude-prefix app/admin/` 시 admin 전용 shared 청크도 제외하도록 `check-bundle-size.mjs` 개선 (frontend impact)
- Added: #152 회원관리 역할 계층 규칙(super_admin→admin+세부권한 자동, member 단독→세부권한 제거) — 백엔드 normalize + 프론트 RoleChecklist 연동 (frontend impact)
- Added: #152 데스크톱 헤더에 정보변경 심사 메뉴 추가, q 검색에 student_id 추가
- Added: #152 관리자 회원 API — GET /admin/members/, GET /admin/members/count, PATCH /admin/members/{id} 신규
- Changed: #152 page.tsx 4파일 분리(use-admin-members/members-table/member-parts) + 서버사이드 검색·정렬·페이지네이션 (frontend impact)
- Added: #152 회원 상세/수정 페이지 ([id]/page.tsx) — 프로필 수정 + 역할 관리 (frontend impact)
- Fixed: #153 리뷰 — 필수값 null 전송 방지, admin_roles fallback=False 명시, member 해제 금지 + 역할 저장 후 draft 재동기화
- Changed: GitHub 배포 잔여 정리 — `prod` Environment 삭제, `.github/workflows/web-show-nginx.yml` 제거 (GitHub는 CI 전용 유지)
