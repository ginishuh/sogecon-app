# 계획서 — 2025-10-09 포스트 런치(Ops M4 / 커뮤니티 F / 디렉터리 고도화)

## 배경 / 목표
- 웹 런치(소개/홈/정적 고지/SEO·A11y) 이후, 운영 안정화와 커뮤니티 기능 최소본을 빠르게 제공한다.
- 본 계획은 “운영(M4)”과 “커뮤니티(F) 스켈레톤”, “디렉터리 성능/UX 고도화”를 같은 사이클에서 병행한다.

## 범위(Scope)
### 1) 운영(M4)
- 배포 파이프라인 확정: 웹/API 배포 대상(Fly/Render/EC2/Vercel 중 택1) 및 헬스체크·롤링 전략 문서화/구현
- 보안: CSP(프로덕션 프로필) 적용, 레이트리밋 정책 분리(로그인/발송/문의)
- 관측: 구조화 로그(code/request_id) 표준화, 기본 APM/에러 수집(Sentry 등) 연동
- 비밀/키: VAPID/JWT/DB 시크릿 운영 저장소로 이전 및 로테이션 절차 문서화

### 2) 커뮤니티(F) 스켈레톤
- 라우트: `/board`(카테고리 탭) → 목록/상세/작성 최소 흐름, 서버는 posts 재사용
- 목록: 카테고리/검색/페이지네이션, 작성: 제목/본문 최소 검증, 상세: 본문 렌더/메타
- 접근성/SEO: 헤딩 구조/메타 반영

### 3) 디렉터리 고도화
- 성능: 서버 페이징/정렬 최적화(인덱스 점검), count 캐시/메모이제이션
- UX: 정렬(이름/기수/최근수정)·필터(지역/직함/업종) 검증 및 “상태 유지 링크” 개선

### 4) DTO/CI 품질
- OpenAPI→DTO 파이프라인에 CI 검증 추가(스키마 변경 시 웹 타입 재생성 확인)
- Lighthouse Budget(선택): Perf/A11y 기준선 파일 추가 및 CI 어서션 적용

## 산출물(DoD)
- 운영: 배포 파이프라인 작동/롤백 절차 문서, CSP 적용/레이트리밋 분리, 에러 수집 대시보드 온보딩
- 커뮤니티: `/board` 목록/상세/작성 라우트 동작, 스냅샷/상호작용 테스트 3+
- 디렉터리: 정렬/필터/페이지네이션 성능 개선, 관련 테스트 2+
- CI: DTO 검증 잡 추가, Lighthouse budget(선택) 적용, 전체 CI 그린

## 작업 순서(브랜치/커밋)
1) ops/deploy-pipeline — 배포/롤백/비밀 키 로드, 헬스체크
2) chore/security-csp-ratelimit — CSP 정책·레이트리밋 분리
3) feat/observability — 구조화 로그·에러 수집 연동
4) feat/board-skeleton — `/board` 목록/상세/작성 + 테스트
5) feat/directory-perf — 서버 페이징/정렬 최적화 + 테스트
6) ci/dto-verify — DTO 동기화 검증 잡 추가, (선택) Lighthouse budget
7) docs/logs — worklog/dev_log/architecture/security_hardening 갱신

## 테스트/검증
- API: 정렬/페이지네이션 회귀, 보안 헤더 스냅샷(CSP)
- Web: 커뮤니티 목록/작성 상호작용 테스트, 디렉터리 URL 동기화/정렬 테스트
- CI: DTO 파이프라인 잡 성공, Lighthouse 기준 유지

## 일정(권고)
- 운영(M4): 1~2일, 커뮤니티(F) 스켈레톤: 1일, 디렉터리 고도화: 0.5~1일

## 리스크/의존성
- 도메인/호스팅 선택에 따른 환경 변수/네트워크 제약
- 게시판 카테고리 정책 확정 필요(임시 탭 구성 후 확정 시 교체)

