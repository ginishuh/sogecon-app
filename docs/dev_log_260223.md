# 2026-02-23

- Fixed: 회원가입(`/signup`) 입력 중 간헐적으로 발생하던 `Cannot read properties of null (reading 'value')` 런타임 오류 수정 (frontend impact)
- Changed: 입력 핸들러에서 `e.currentTarget.value`를 즉시 캡처한 뒤 상태 업데이트하도록 변경하여 이벤트 수명 주기 영향 제거
- Added: `__tests__/signup-page.test.tsx` 신규 추가로 회원가입 입력 반영 회귀 테스트 보강
- Fixed: `hero-item-form.tsx` 동일 패턴(`e.currentTarget` 지연 참조) 6건 일괄 수정 (frontend impact)
- Added: `__tests__/hero-item-form.test.tsx` 신규 추가로 HeroItemForm 제출 payload 회귀 테스트 보강
- Notes: `/auth/session` 401은 비로그인 상태에서 인증 확인 요청 시 정상 동작(unauthorized 분기)으로 확인
- Changed: 관리자 알림 발송 '테스트' 명칭 → 운영 명칭 정리 (POST .../test → .../send, 모델/함수명 리네이밍, frontend impact)
- Changed: 알림 발송 레이트리밋 1/minute → 6/minute (10초 간격)으로 완화
- Fixed: ENV 하위호환 fallback 추가 (RATE_LIMIT_NOTIFY_TEST → RATE_LIMIT_NOTIFY_SEND 자동 이관 + deprecation 경고)
- Ops/Docs: 문서 경로를 실제 라우트 기준으로 통일, AGENTS.md/GEMINI.md 동기화, PR #160 / Closes #156
- Fixed: .env 파일 전용 환경에서도 RATE_LIMIT_NOTIFY_TEST fallback 동작하도록 dotenv_values 직접 확인 추가
- Changed: PR #160 최종 정책으로 알림 레이트리밋 레거시 fallback 제거 (RATE_LIMIT_NOTIFY_SEND 단일 지원)
- Fixed: 로그인 실패 시 단일 문구만 표시되던 문제 개선 — 승인 대기(`member_pending_approval`)와 비활성(`member_not_active`) 사유를 구분 안내하도록 API/Web 동시 반영 (frontend impact)
- Added: `__tests__/login-page.test.tsx` 신규 추가로 로그인 오류 사유별 토스트 메시지 회귀 테스트 보강
- Fixed: 선행 실패 `__tests__/me-form.validation.test.tsx`를 최신 `ProfileForm` 계약(`email` 필수, `name` 제거)에 맞춰 정합성 복구
- Security/UX: 로그인 상태 오라클 완화 위해 `login_member` 분기를 `비밀번호 검증 → 상태 판정` 순으로 재정렬하고, `/auth/login` 실패 응답에 `code` 필드를 일관 제공하도록 `ApiError` 경로로 통일
- Added: 로그인 회귀 테스트 보강 — `login_failed` 메시지 경로와 비활성 계정 오라클 완화 케이스(틀린 비밀번호 시 401 `login_failed`) 추가
- Feat: `POST /admin/signup-requests/{id}/reissue-token` 추가로 승인(`approved`) 신청 건 활성화 토큰 재발급 지원
- Feat: 토큰 발급 이력 로깅 테이블(`signup_activation_issue_logs`) 및 `GET /admin/signup-requests/{id}/activation-token-logs` 조회 API 추가(토큰 원문 미저장, 해시/꼬리값 저장)
- Changed: 관리자 가입심사 UI에 `재발급` 버튼 및 최근 발급 이력 표시 추가, 승인/재발급 공통 복사 카드 동작으로 통합 (frontend impact)
- Security: 발급 이력 응답(`SignupActivationIssueLogRead`)에서 `token_hash` 노출 제거, UI/API 계약은 `token_tail` 기반 식별만 유지
- Refactor: 가입 승인 시 회원 활성화/신청 상태 변경/발급 이력 기록을 단일 트랜잭션 커밋으로 정리해 원자성 강화
- Perf: `signup_activation_issue_logs` 인덱스를 `token_hash` + `(signup_request_id, issued_at)`로 축소하여 과인덱싱 지적 반영
- Changed: 관리자 가입심사 approve/reissue 응답 모델을 단일 모델로 통합하고 로그 조회 실패 시 `console.warn` 경고 추가 (frontend impact)
