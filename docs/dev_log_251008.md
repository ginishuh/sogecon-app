# dev_log_251008

- chore(api): member/post 추가 필드 마이그레이션 추가 — Alembic `0012_member_post_extra_fields` (members 회사/부서/직급/회사전화/개인·직장주소/업종 · posts category/pinned/cover)
- chore(web): vitest 3.2.4 상향 — 감사 취약점(GHSA-9crc-q9x8-hgqq) 대응
- feat(web): 공지/소식 상세 페이지(`/posts/[id]`) 추가, 핀 공지 섹션 분리·3개 제한·"공지 전체 보기" 버튼, `next/image` 원격 도메인 구성(`NEXT_PUBLIC_IMAGE_DOMAINS`)
- feat(api): B v2 프로필 검증 규칙(전화 형식, 부서/직함/주소/업종 길이) 적용 및 members_service 최종 가드(문자열 trim→model_copy)·pytest 커버리지 추가
- feat(web): B v2 `/me` 폼 동기 검증·에러 맵핑, 공개 범위 안내 카피(접근성 라벨) 및 vitest 검증 추가
- feat(api): `/me/avatar` 업로드(512px 리사이즈·100KB 제한·JPEG 변환) 및 media static 서빙, `avatar_path` 마이그레이션 추가
- feat(web): 프로필 사진 업로드 UI·미리보기, FormData 전송 지원(`apiFetch`), accessibility copy 보강
- feat(web): 디렉터리 URL 동기화·무한스크롤·접근성 상태 구성, vitest URL 동기화 테스트 추가
- chore(schemas): FastAPI 기반 OpenAPI 덤프 스크립트(`scripts/export_openapi.py`)와 DTO 패키지 경로 정리, 웹에서 `schemas` 타입 직접 참조
- feat(web): PWA 오프라인 스켈레톤(`/offline` 페이지, SW 네비게이션 fallback)으로 홈/디렉터리 최소 안내 제공
- feat(web): 소개 `/about/greeting`,`/about/org`,`/about/history` 정적 페이지와 내비 햄버거 메뉴 확장
- feat(web): 홈 히어로·카드 레이아웃, 디자인 토큰(색/타이포/간격) 확장 및 vitest 스냅샷 추가
- chore(web): 전역 metadata/OG/sitemap/robots/Analytics 구성, skip-link·랜드마크로 접근성 보강
- feat(web): 웹 런치 최종 범위 마감(소개 실카피/이미지, 홈 히어로 최종 카피, 디렉터리 정렬·필터 확장, FAQ·Privacy·Terms 정적 페이지, SEO/OG 갱신, 접근성 리팩터링).
- feat(api): members 정렬 인덱스/정렬 로직 고도화 및 API 테스트 보강.
- ci(web): Lighthouse runs=3으로 상향해 측정 안정화.
- docs(web): Privacy/Terms 시행일·개정일 표기 추가.

### 타입/정적 검사
- pyright: 로컬 스텁(typings/pywebpush/__init__.pyi) 추가로 `pywebpush` 타입 스텁 경고 제거
 - compileall: Alembic `0013_member_avatar.py` 헤더/문자열 이스케이프 수정으로 SyntaxError 해결

## 검증
- DATABASE_URL=sqlite:///./dev.sqlite3 .venv/bin/python -m pytest tests/api/test_profile_validation_v2.py: 12 passing
- DATABASE_URL=sqlite:///./dev.sqlite3 .venv/bin/python -m pytest tests/api/test_profile_avatar.py tests/api/test_profile_fields_v1.py
- pnpm -C apps/web test: 19 passing (소개/홈/SEO 스냅샷 포함)
- pnpm -C apps/web build
- pnpm --dir apps/web exec vitest run --update
- pnpm --dir apps/web test
- pnpm --dir apps/web build
- .venv/bin/pytest -q
- CI: PR에 Lighthouse 워크플로우 추가 — Perf/A11y(≥0.90) 자동 검증
- Test: next/image mock에서 priority/placeholder 등 비DOM prop 제거(경고 제거)
- CI: Lighthouse 실행 후 리포트 링크를 PR 코멘트로 자동 첨부
 - CI: PR 코멘트 권한 부족 에러 방지를 위해 워크플로 권한(pull-requests: write) 및 예외 처리 추가
